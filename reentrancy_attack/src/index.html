<!DOCTYPE html>
<body>
<head>
  <meta charset="utf-8">
  <title>Reentrance Attack</title>

  <!-- Font awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"/>
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

  <!-- json editor -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/9.4.1/jsoneditor.min.js" integrity="sha512-gpE/vYKJCAfv267phg9Hb+EbxJHxN27V490vWDKe+99ow7FnZGF9Cd5zd24dsYiM4n7iE7E0+ucPCXrtnnn5Cg==" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/9.4.1/jsoneditor.css" integrity="sha512-cC1pvPq3s1SHRrOj6iqqY7wgIY1rc71D6WUrL6Tkd1jDpVOZlfQl3ybwwBos8ktkZAK/iwQ4nWj/qUhlZ/rxrw==" crossorigin="anonymous" />

  <link rel="stylesheet" href="./assets/css/main.css"/>
</head>

<body class="bg-light">
  <div class="container">
    <div class="my-3 border rounded py-4 px-5 bg-white">
      <section id='logged-out' style="display:none">
        You are not logged in, please: 
        <button type="button" class="btn btn-primary"
                onclick="login()"> Login </button>
      </section>

      <section id='logged-in' style="display:none">
        Logged in as: <span id="account"> </span>
        <button class="btn btn-secondary" type="button"
                onclick="logout()"> Logout </button>

        <form class="mt-5">
          <div class="form-group">
            <label for="target">Target</label>
            <input type="text" class="form-control" id="target"
                   placeholder="dev-1620199843122-4433930">
            <small class="form-text text-muted">
              The address of the contract to attack
            </small>
          </div>

          <div class="form-group">
            <label for="fc">Function</label>
            <input type="text" class="form-control" id="fc"
                   placeholder="withdraw">
            <small class="form-text text-muted">
              The function to call in the contract
            </small>
          </div>

          <div class="form-group">
            <label for="args">Arguments</label>
            <div id="args"></div>
            <small class="form-text text-muted">
                The arguments of the function. Remember,
                <input type="text" class="border-0 small-input" id="near" value="0.10" onkeyup="n2yn()"> N is 
                <input type="text" class="border-0 large-input" id="ynear" value="100000000000000000000000"> yN
            </small>
          </div>


          <div class="row">
            <div class="col-4">
              <div class="form-group">
                <label for="times">Times</label>
                <input type="number" class="form-control" id="times" placeholder="1">
                <small class="form-text text-muted">
                  Number of times the function will be called
                </small>
              </div>
            </div>

            <div class="col-4">
              <div class="form-group">
                <label for="attached">Attached</label>
                <div class="input-group">
                  <input type="number" class="form-control" id="attached"
                         placeholder="0.1" step="0.01">
                  <div class="input-group-append">
                      <div class="input-group-text">NEAR</div>
                  </div>
                </div>
                <small class="form-text text-muted">
                  Amount of NEAR attached to the call
                </small>
              </div>
            </div>

            <div class="col-4">
              <div class="form-group">
                <label for="gas">Gas</label>
                <div class="input-group">
                  <input type="number" class="form-control" id="gas"
                         placeholder="9">
                  <div class="input-group-append">
                      <div class="input-group-text">TGas</div>
                  </div>
                </div>
                <small class="form-text text-muted">
                  Amount of Gas to attach on <b>every call</b>
                </small>
              </div>
            </div>
          </div>

        <button type="button" class="btn btn-primary" onclick="exec()"> Execute </button>
        </form>

        <hr class="my-4">

        <label> Result: </label>
        <div class="bg-dark p-3 text-info" id="result"> Execute to see the result </label>

    </section>
  </div>  

  <label class="text-align-right">
    Made by <a href="https://www.twitter.com/gagdiez">gagdiez</a>
  </label>

  </div>
  <script src="assets/js/index.js"></script>
</body>
</html>
